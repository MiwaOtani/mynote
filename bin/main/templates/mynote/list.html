<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>暗記アプリMyNote</title>
    <!-- CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>

<body>
    <div class="outerWrapper">

        <!-- ヘッダーをインクルード -->
        <header id="header" class="">
            <nav>
                <ul>
                    <li><a class="nav" th:href="@{/mynote}"><i class="fa-solid fa-house-chimney"></i></a></li>
                    <li><a class="nav" th:href="@{/mynote/admin}"><i class="fa-solid fa-gear"></i></a></li>
            </nav>
            <h1>myNote<i class="fa-solid fa-pencil"></i></h1>
        </header>

        <main id="main" class="">
            <!-- ここにメインコンテンツ -->
<h2>クイズ一覧</h2>
<!--Flashメッセージの表示-->
<p th:if="${message}" th:text="${message}" style="color: blue;">完了メッセージ</p>
<p th:if="${errorMessage}" th:text="${errorMessage}" style="color: red;">エラーメッセージ</p>

<table border="1" width="300">
	<thead>
		<tr>
			<th>ID</th>
			<th>問題</th>
			<th>回答1</th>
			<th>回答2</th>
			<th>回答3</th>
			<th>回答4</th>
			<th>詳細</th>
			<th>カテゴリ</th>
			<th>正解フラグ</th>
			<th>回答日時</th>
		</tr>
	</thead>
	<tbody>
		
		<tr th:each="quiz : ${quizzes}"> <!--繰り返し処理-->
			<td th:text="${quiz.id}"></td>
			<td th:text="${quiz.question}"></td>
			<td th:text="${quiz.answer1}"></td>
			<td th:text="${quiz.answer2}"></td>
			<td th:text="${quiz.answer3}"></td>
			<td th:text="${quiz.answer4}"></td>
			<td><a th:href="@{/mynote/quizzes/{id}(id=${quiz.id})}">詳細</a></td>
			<td><ul>
				<li th:each="cat : ${quiz.categories}">
					<span th:text="${cat.id}">カテゴリID</span>：<span th:text="${cat.name}">カテゴリ名</span>
				</li>
			</ul></td>
			<td><span th:text="${quiz.history.isCorrect}" th:if="${quiz.history != null and quiz.history.answeredAt != null}"></span></td>
			<td><span th:text="${quiz.history.answeredAt}" th:if="${quiz.history != null and quiz.history.answeredAt != null}"></span></td>
			<!--{id}がプレースホルダ位置で、( )の中身はそこのidに${quiz.id}を代入するという意味-->
		</tr>
	</tbody>
</table>

<a th:href="@{/mynote/quizzes/form}">新規登録</a>

<!-- //メインコンテンツここまで -->
        </main>

        <!-- フッターをインクルード -->
        <footer id="footer">
            <p>Copyright &copy; 2025 Anki Appli myNote.</p>
        </footer>
    </div><!--outerWrapper-->
	
	<script src="/js/script.js"></script>
</body>

</html>